<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Studio 100 Ton</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ì´ì¼€ì•„(IKEA) ìŠ¤íƒ€ì¼ */
        body { background-color: #0051ba; font-family: 'Verdana', sans-serif; color: white; }
        .ikea-yellow { color: #ffdb00; }
        .ikea-btn { background-color: #ffdb00; color: #0051ba; }
        .ikea-btn:hover { background-color: #e6c600; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
        .loading-spin { animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen">

    <div class="text-center mb-10">
        <h1 class="text-6xl font-black tracking-tighter mb-2">
            STUDIO <span class="ikea-yellow">100 TON</span>
        </h1>
        <p class="text-sm tracking-widest bg-black/20 px-4 py-1 rounded inline-block">HYPER-SCALE VIDEO FACTORY</p>
    </div>

    <div class="w-full max-w-2xl px-6">
        <input type="text" id="urlInput" 
            class="w-full p-5 text-xl text-black font-bold rounded-full border-4 border-[#ffdb00] focus:outline-none shadow-xl"
            placeholder="ìƒí’ˆ ë§í¬ë¥¼ íˆ¬ì…í•˜ì„¸ìš” (URL)">
        
        <button onclick="ignite()" id="mainBtn" class="mt-6 w-full py-5 text-2xl font-black rounded-full ikea-btn transition-transform active:scale-95 flex justify-center items-center shadow-xl">
            <span id="btnText">âš¡ ì˜ìƒ ìƒì„± ìš”ì²­ (IGNITE)</span>
        </button>
    </div>

    <div class="mt-10 w-full max-w-2xl p-6 bg-white/10 border-2 border-[#ffdb00] rounded-xl h-48 overflow-y-auto font-mono text-sm" id="logArea">
        <p class="ikea-yellow font-bold">> SYSTEM READY. WAITING FOR ORDER...</p>
    </div>

    <script>
        async function ignite() {
            const url = document.getElementById('urlInput').value;
            const logArea = document.getElementById('logArea');
            const btnText = document.getElementById('btnText');
            const mainBtn = document.getElementById('mainBtn');
            
            if(!url) {
                logArea.innerHTML += `<p class="text-red-300 font-bold">> âŒ ERROR: ë§í¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>`;
                return;
            }

            // UI ë³€ê²½ (ë¡œë”© ì‹œì‘)
            btnText.innerText = "âš™ï¸ ì—”ì§„ ê°€ë™ ì¤‘...";
            mainBtn.disabled = true;
            mainBtn.classList.add("opacity-50");
            logArea.innerHTML += `<p class="text-white mt-2">> ğŸ“¡ ì£¼ë¬¸ ì „ì†¡ ì¤‘: ${url}...</p>`;
            logArea.scrollTop = logArea.scrollHeight; // ìŠ¤í¬ë¡¤ ìë™ ë‚´ë¦¼

            try {
                // â˜… ì‚¬ì¥ë‹˜ì˜ AWS ì—”ì§„ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë³´ëƒ…ë‹ˆë‹¤ â˜…
                const response = await fetch("http://3.27.133.204:8000/ignite", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ url: url })
                });

                const data = await response.json();
                
                // ì„±ê³µ ë©”ì‹œì§€ ì¶œë ¥
                logArea.innerHTML += `<p class="ikea-yellow">> ğŸ“© ì—”ì§„ ì‘ë‹µ: ${data.message}</p>`;
                logArea.innerHTML += `<p class="text-green-300 font-bold text-lg">> âœ… ì ‘ìˆ˜ ì™„ë£Œ! (Status: ${data.status})</p>`;

            } catch (error) {
                console.error(error);
                logArea.innerHTML += `<p class="text-red-400 font-bold mt-2">> âš ï¸ í†µì‹  ì˜¤ë¥˜ ë°œìƒ!</p>`;
                logArea.innerHTML += `<p class="text-xs text-gray-200">Tip: ì£¼ì†Œì°½ ì˜† 'ìë¬¼ì‡ 'ë¥¼ ëˆŒëŸ¬ 'ì•ˆì „í•˜ì§€ ì•Šì€ ì½˜í…ì¸ 'ë¥¼ í—ˆìš©í•´ì£¼ì„¸ìš”.</p>`;
            }
            
            // UI ë³µêµ¬
            btnText.innerText = "âš¡ ì˜ìƒ ìƒì„± ìš”ì²­ (IGNITE)";
            mainBtn.disabled = false;
            mainBtn.classList.remove("opacity-50");
            logArea.scrollTop = logArea.scrollHeight;
        }
    </script>
</body>
</html>
